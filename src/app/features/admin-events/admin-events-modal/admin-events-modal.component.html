<div class="tickets-admin-events-modal__container">
  <tickets-modal-header
    [title]="data.mode === 'edit' ? 'Edit Event' : 'Create Event'"
    (closeClicked)="close()"
  ></tickets-modal-header>

  <form class="tickets-admin-events-modal__form" [formGroup]="form">
    <div class="tickets-admin-events-modal__form-field">
      <label for="name" class="tickets-admin-events-modal__label">Event Name</label>
      <input formControlName="name" id="name" class="tickets-admin-events-modal__input" type="text" />
    </div>

    <tickets-date-time-picker
      fieldName="Event Date"
      formControlName="eventDate"
    ></tickets-date-time-picker>
    @if(form && form.errors && form.errors['eventDate']) {
      <div class="tickets-admin-events-modal__error"> {{ form.errors["eventDate"]}}</div>
    }

    <div class="tickets-admin-events-modal__form-field">
      <label for="venue" class="tickets-admin-events-modal__label">Venue</label>
      <input formControlName="venue" id="venue" class="tickets-admin-events-modal__input" type="text" />
    </div>

    <div class="tickets-admin-events-modal__form-field">
      <label for="mainCategoryId" class="tickets-admin-events-modal__label">Main Category</label>
      <select
        id="mainCategoryId"
        formControlName="mainCategoryId"
        class="tickets-admin-events-modal__input"
      >
        @for (category of mainCategories(); track category.id) {
          <option [value]="category.id">{{ category.name }}</option>
        }
      </select>
    </div>

    <div class="tickets-admin-events-modal__form-field">
      <label for="availableTickets" class="tickets-admin-events-modal__label">Available Tickets</label>
      <input formControlName="availableTickets" id="availableTickets" class="tickets-admin-events-modal__input" type="number" />
    </div>

    <div class="tickets-admin-events-modal__form-field">
      <label for="pricePerTicket" class="tickets-admin-events-modal__label">Price per Ticket</label>
      <input formControlName="pricePerTicket" id="pricePerTicket" class="tickets-admin-events-modal__input" type="number" />
    </div>

    <tickets-date-time-picker
      fieldName="Sales Start Date"
      formControlName="salesStartDate"
    ></tickets-date-time-picker>
    @if(form && form.errors && form.errors['salesStartDate']) {
      <div class="tickets-admin-events-modal__error"> {{ form.errors["salesStartDate"]}}</div>
    }

    <tickets-date-time-picker
      fieldName="Sales End Date"
      formControlName="salesEndDate"
    ></tickets-date-time-picker>
    @if(form && form.errors && form.errors['salesEndDate']) {
      <div class="tickets-admin-events-modal__error"> {{ form.errors["salesEndDate"]}}</div>
    }

    <div class="tickets-admin-events-modal__form-field">
      <label for="duration" class="tickets-admin-events-modal__label">Event Duration (minutes)</label>
      <input formControlName="duration" id="duration" class="tickets-admin-events-modal__input" type="number" />
    </div>

    <tickets-modal-buttons
      [closeText]="'Cancel'"
      [saveText]="'Save'"
      [disabled]="form.invalid"
      (savedClicked)="onSave($event)"
    ></tickets-modal-buttons>
  </form>
</div>
